{% extends "product_base.html"%}
{% load i18n %}
{% load catalog_tags %}


{% block ACTIONS %}
{% if perms.catalog.add_campaign %}
<a class="mat-button mat-button-default" href="{% url 'dashboard:campaign-create'%}"> <i class="fas fa-plus icon"></i><span>{% trans "New Campaign" %}</span></a>
{% endif %}
<a class="mat-button mat-button-default" href="{{campaign.get_update_url}}"><i class="fas fa-refresh icon"></i><span>{% trans "Update" %}</span></a>
<a class="mat-button mat-button-default" href="{% url 'dashboard:campaigns' %}"><i class="fas fa-list icon"></i><span>{% trans "Campaigns" %}</span></a>
{% endblock ACTIONS %}


{% block CONTENT_MAIN %}

<div class="container">
    <div class="mat-box">
        <div class="grid">
            <div class="box">
                <p class="entry"><span class="key">{% trans "Name" %}</span> <span class="value">{{campaign.name}}</span></p>
                <p class="entry"><span class="key">{% trans "Title" %}</span> <span class="value">{{campaign.title}}</span></p>
                <p class="entry"><span class="key">{% trans "Active" %}</span> <span class="value">{{campaign.is_active|yesno}}</span></p>
                <p class="entry"><span class="key">{% trans "Start at" %}</span> <span class="value">{{campaign.start_at|date}}</span></p>
                <p class="entry"><span class="key">{% trans "End at" %}</span> <span class="value">{{campaign.end_at|date}}</span></p>
                <p class="entry"><span class="key">{% trans "Created" %}</span> <span class="value">{{campaign.created_at|date:"F j, Y"}}</span></p>
                <p class="entry"><span class="key">{% trans "Description" %}</span> <span class="value">{{campaign.description}}</span></p>
            </div>
            {% if campaign.image %}
            <div class="img-wrapper col-4">
                <img class="img-responsive" src="{{campaign.get_image_url}}" alt="{{campaign.name}}">
            </div>
            {% endif %}
        </div><!--End of grid-->
    </div><!--End mat-box-->
    <div class="mat-box full">
        <h5> {% trans "Campaign Products" %}</h5>
        <div class="mat-table-wrapper">
            <table id="item-list" class="mat-table">
                <thead>
                        <tr>
                                <th></th>
                                <th>{% trans "Article" %}</th>
                                <th>{% trans "Price" %}</th>
                                <th>{% trans "Promotion Price" %}</th>
                                <th>{% trans "Details" %}</th>
                        </tr>
                </thead>
                <tbody>
                        {% for item in campaign.products.all  %}
                        <tr>
                            <td><div class="col-xs-3 col-4"><img class="img-responsive" src="{{item.image}}" alt="{{item.display_name}}"></div></td>
                            <td>{{item.display_name}}</td>
                            <td><span>{{item.price|floatformat:"-2"}}</span> <span>{% trans CURRENCY %}</span></td>
                            <td><span>{{item.promotion_price|floatformat:"-2"}}</span> <span>{% trans CURRENCY %}</span></td>
                            <td><a class="mat-button mat-button-default" href="{{item.product.get_absolute_url}}"> <i class="fas fa-info icon"></i><span>{% trans "Product Details" %}</span></a></td>
                        </tr>
                        {% endfor %}
                        
                </tbody>

            </table>
        </div><!--End of Table Wrapper-->
    </div><!--End mat-box-->

    <div class="mat-box full">
        <div class="mat-box-content">
            {% include 'tags/dashboard_products_snippet.html' with ACTIONS_URL=campaign.get_add_products_url ADD_SELECTION=True product_list=products %}
        </div><!--End mat-box-content-->
    </div><!--End mat-box-->
</div>
{% endblock CONTENT_MAIN %}